groups:
- name:  rules
  rules:
#  - alert: KubeSchedulerDown
#    expr: absent(up{job="kube-scheduler"} == 1)
#    for: 1m
#    labels:
#      severity: critical
#    annotations:
#      description: KubeScheduler has disappeared from Prometheus target discovery.
#      runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeschedulerdown
#      summary: Target disappeared from Prometheus target discovery.
   - alert: KubernetesMemoryPressure
     expr: kube_node_status_condition{condition="MemoryPressure",status="true"} == 1
     for: 1m
     labels:
       severity: critical
     annotations:
       summary: Kubernetes memory pressure
       description: "k8s现在有内存压力，请尽快处理。"

   - alert: KubernetesNodeReady
     expr: kube_node_status_condition{condition="Ready",status="true"} == 0
     for: 1m
     labels:
       severity: critical
     annotations:
       summary: Kubernetes Node notready
       description: "节点挂了"
   - alert: HostOutOfMemory
     expr: node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes * 100 < 10
     for: 1m
     labels:
       severity: warning
     annotations:
       summary: Host out of memory (instance {{ $labels.instance }})
       description: Node memory is filling up (< 10% left)\n  VALUE = {{ $value }}\n
   - alert: MysqlDown
     expr: mysql_up == 0
     for: 0m
     labels:
       severity: critical
     annotations:
       summary: MySQL down (instance {{ $labels.instance }})
       description: MySQL instance is down on {{ $labels.instance }}
   - alert: RedisDown
     expr: redis_up == 0
     for: 0m
     labels:
       severity: critical
     annotations:
       summary: Redis down (instance {{ $labels.instance }})
       description: Redis instance is down\n  VALUE = {{ $value }}\n
